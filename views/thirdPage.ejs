<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" type="text/css">
  <link rel="stylesheet" href="/stylesheets/secondPage.css" type="text/css">
  <title>MapTelling4.0</title>
  <style>
    .image {
      display: block;
      width: 68%;
      margin: auto;
      max-height: 160px;
      border-radius: 12px 12px 0 0;
    }

    .text {
      font-size: 17.3px;
      text-align: center;
      position: absolute;
      color: #fff;
      background: #007bff;
      padding: 12px 6px 8px 6px;
      border-radius: 3px 15px 15px 3px;
      top: 30%;
      left: 28%;
      font-family: 'Ubuntu';
      box-shadow: 2px 2px 2px #000;
    }

    audio {
      display: block;
      width: 50%;
    }
  </style>
</head>

<body class="bg-light">
  <div class="w-100" style="background-image: url(&quot;/images/23798477_1682366181795446_1316892254_o.jpg&quot;);">
    <div class="container py-5">
      <div class="row">
        <div class="col-md-12">
          <a class="nav-link text-right"><i class="fa d-inline fa-lg fa-user" style="color: white;"></i>
            <font color="white"><%= name%></font>
          </a>
          <h1 class="text-white">MapTelling4.0</h1>
        </div>
      </div>
    </div>
  </div>
  <div id="audiodiv" class="py-5">
    <div class="container">
      <img src="/images/hear2.jpg" alt="Card" class="image">
      <div class="text">Hip - MapTelling </div>
      <div align="center"> <audio controls="" controlslist="nodownload"><!--remove the download button-->
				<source src="/Hip3.m4a">
			</audio> </div>
    </div>
    
  </div>
  <div id="ready" class="col-md-12 text-center">
    <a id="backbtn" class="btn w-25 btn-primary" href="/information-trial1">Back </a> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <a id="readybtn" class="btn w-25 btn-primary" style="color:white" >I'm ready </a>
  </div>
  <% if(index%2) {%>
  <div id="correct1" class="col-md-12 py-5">
     <p id="demo" align="right" style="font-size:20px"></p>
    <div class="card">
      <div class="card-header bg-primary">
        <h3 class="text-white">1. รูปแผนที่นี้ตรงกับในหัวหรือไม่ </h3>
      </div>
      <div class="card-body">
        <img class="img-fluid d-block mx-auto border border-dark" src="/images/map_correct.jpg" width="1000">
        <div class="col-md-12 text-center py-3">
          <a id="answer1btn" class="btn w-25 btn-primary" style="color:white">Yes </a> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          <a id="correct1btn" class="btn w-25 btn-primary" style="color:white" >No </a>
        </div>
      </div>
    </div>
  </div>
    <div id="correct2" class="col-md-12 py-5">
       <p id="demo1" align="right" style="font-size:20px"></p>
    <div class="card">
      <div class="card-header bg-primary">
        <h3 class="text-white">2. อะไรที่ไม่ตรงกับภาพที่คิดไว้ </h3>
      </div>
      <div class="card-body">
        <img class="img-fluid d-block mx-auto border border-dark" src="/images/map_correct.jpg" width="1000">
        <div class="col-md-12 text-center py-3">
          <a id ="correct2btn" class="btn w-25 btn-primary" >
            <img class="img-fluid d-block mx-auto" src="/images/obw1.png" width="120"> </a> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          <a id ="correct3btn" class="btn w-25 btn-primary" >
            <img class="img-fluid d-block mx-auto border border-dark" src="/images/obw2.png" width="50"> </a>
        </div>
        <div class="col-md-12 text-center">
          <a id ="correct4btn"  class="btn w-25 btn-primary" >
            <img class="img-fluid d-block mx-auto" src="/images/obw3.png" width="120"> </a> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          <a id ="correct5btn" class="btn w-25 btn-primary" >
            <img class="img-fluid d-block mx-auto" src="/images/obw4.png" width="150"> </a>
        </div>
      </div>
    </div>
  </div>
  <% }else { %>
  <div id="wrong1" class="col-md-12 py-5">
     <p id="demo" align="right" style="font-size:20px"></p>
    <div class="card">
      <div class="card-header bg-primary">
        <h3 class="text-white">1. รูปแผนที่นี้ตรงกับในหัวหรือไม่ </h3>
      </div>
      <div class="card-body">
        <img class="img-fluid d-block mx-auto border border-dark" src="/images/map_wrong.jpg" width="1000">
        <div class="col-md-12 text-center py-3">
          <a id="wrong1btn" class="btn w-25 btn-primary" style="color:white">Yes </a> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          <a id="wrong2btn" class="btn w-25 btn-primary" style="color:white" >No </a>
        </div>
      </div>
    </div>
  </div>
  <div id="wrong2"  class="col-md-12 py-5">
     <p id="demo1" align="right" style="font-size:20px"></p>
    <div class="card">
      <div class="card-header bg-primary">
        <h3 class="text-white">2. อะไรที่ไม่ตรงกับภาพที่คิดไว้ </h3>
      </div>
      <div class="card-body">
        <img class="img-fluid d-block mx-auto border border-dark" src="/images/map_wrong.jpg" width="1000">
        <div class="col-md-12 text-center py-3">
          <a id="wrong3btn" class="btn w-25 btn-primary">
            <img class="img-fluid d-block mx-auto" src="/images/obw1.png" width="120"> </a> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          <a id="wrong4btn" class="btn w-25 btn-primary" >
            <img class="img-fluid d-block mx-auto border border-dark" src="/images/obw2.png" width="50"> </a>
        </div>
        <div class="col-md-12 text-center">
          <a id="wrong5btn" class="btn w-25 btn-primary" >
            <img class="img-fluid d-block mx-auto" src="/images/obw3.png" width="120"> </a> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          <aid="wrong6btn"  class="btn w-25 btn-primary">
            <img class="img-fluid d-block mx-auto" src="/images/obw4.png" width="150"> </a>
        </div>
      </div>
    </div>
  </div>
  <% } %>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/core-js/2.4.1/core.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

</body>
<script>
     $(function(){
       
       var answer1 = ""
       var answer2 = ""
       var myVar;
       var time1 = ""
       var time2 = ""

       var bool1 = 1
       var bool2 = 0

        $('#wrong1').hide();
        $('#wrong2').hide();

        $('#correct1').hide();
        $('#correct2').hide();
        
       

        $('#readybtn').click(function(){
            
            $('#correct1').show();
            $('#wrong1').show();
            // $('#readybtn').addClass('disabled');
            // $('#backbtn').addClass('disabled');
            $('#audiodiv').hide();
            $('#ready').hide();
            myStartFunction();
        })

        var time = 20;

        function myStartFunction() {
           myVar = setInterval(function(){ myTimer() }, 1000);
           
        }

        function myTimer() {
          
            time-=1;
             document.getElementById("demo").innerHTML = time;
             document.getElementById("demo1").innerHTML = time;
             
            if(time  == 0){
              // clearInterval(myVar);
              if(bool1)  {

                answer1 = "ผิด"
                time1 = (20-time)+"s"
                $('#correct1').hide();
                $('#wrong1').hide();

                $('#wrong2').show();
                $('#correct2').show();
                time = 20;
                bool1= 0;
                bool2 = 1;
                
              }else if(bool2){
                time2 = (20-time) +"s"
                answer2="ผิด"
                // console.log("hrllo");
                  $.ajax({
                  url: '/answercorrect',
                  type:'POST',
                  data: {answer1 : answer1, answer2 :answer2, time1 : time1 , time2 : time2},
                  success: function (success) {
                    if(success){
                      swal("ไปสู่การทดลอง2"," ", "success").then(() => {
                        window.location = '/information-trial2';
                      });
                    }else{
                      swal('มีข้อผิดพลาด',' ','error' ).then(() => {
                        window.location.reload();
                      });
                    }
                  }
              });
              }
            }
        }

        //correct pic

        $('#answer1btn').click(function(){
            
        answer1 = "ถูก"
        answer2 = ""
        time1 = (20-time)+"s"
        time2 = ""

         $.ajax({
                url: '/answercorrect',
                type:'POST',
                data: {answer1 : answer1, answer2 :answer2, time1 : time1 , time2 : time2},
                success: function (success) {
                  if(success){
                    swal("ไปสู่การทดลอง2"," ", "success").then(() => {
                      window.location = '/information-trial2';
                    });
                  }else{
                    swal('มีข้อผิดพลาด',' ','error' ).then(() => {
                      window.location.reload();
                    });
                  }
                }
            });
      });

      $('#correct1btn').click(function(){
            
        answer1 = "ผิด"
        time1 = (20-time)+"s"
        bool1= 0;
         bool2 = 1;
         $('#correct1').hide();
         $('#correct2').show();
         time = 20;
        //  myStartFunction()
         

      }); 

       $('#correct2btn').click(function(){
            
        answer2 = "ผิด"
        time2 = (20-time)+"s"

         $.ajax({
                url: '/answercorrect',
                type:'POST',
                data: {answer1 : answer1, answer2 :answer2, time1 : time1 , time2 : time2},
                success: function (success) {
                  if(success){
                    swal("ไปสู่การทดลอง2"," ", "success").then(() => {
                      window.location = '/information-trial2';
                    });
                  }else{
                    swal('มีข้อผิดพลาด',' ','error' ).then(() => {
                      window.location.reload();
                    });
                  }
                }
            });
      });
      $('#correct3btn').click(function(){
            
        answer2 = "ผิด"
        time2 = (20-time)+"s"        

         $.ajax({
                url: '/answercorrect',
                type:'POST',
                data: {answer1 : answer1, answer2 :answer2, time1 : time1 , time2 : time2},
                success: function (success) {
                  if(success){
                    swal("ไปสู่การทดลอง2"," ", "success").then(() => {
                      window.location = '/information-trial2';
                    });
                  }else{
                    swal('มีข้อผิดพลาด',' ','error' ).then(() => {
                      window.location.reload();
                    });
                  }
                }
            });
      });
      $('#correct4btn').click(function(){
            
        answer2 = "ผิด"
        time2 = (20-time)+"s"
        
         $.ajax({
                url: '/answercorrect',
                type:'POST',
                data: {answer1 : answer1, answer2 :answer2, time1 : time1 , time2 : time2},
                success: function (success) {
                  if(success){
                    swal("ไปสู่การทดลอง2"," ", "success").then(() => {
                      window.location = '/information-trial2';
                    });
                  }else{
                    swal('มีข้อผิดพลาด',' ','error' ).then(() => {
                      window.location.reload();
                    });
                  }
                }
            });
      });
      $('#correct5btn').click(function(){
            
        answer2 = "ผิด"
        time2 = (20-time)+"s"
        
         $.ajax({
                url: '/answercorrect',
                type:'POST',
                data: {answer1 : answer1, answer2 :answer2, time1 : time1 , time2 : time2},
                success: function (success) {
                  if(success){
                    swal("ไปสู่การทดลอง2"," ", "success").then(() => {
                      window.location = '/information-trial2';
                    });
                  }else{
                    swal('มีข้อผิดพลาด',' ','error' ).then(() => {
                      window.location.reload();
                    });
                  }
                }
            });
      });

       
      //wrong pic

      $('#wrong1btn').click(function(){
            
        answer1 = "ผิด"
        answer2 = " "
        time1 = (20-time)+"s";
        time2 = " "
         $('#wrong1').hide();
        //  $('#wrong2').show();

         $.ajax({
                url: '/answercorrect',
                type:'POST',
                data: {answer1 : answer1, answer2 :answer2, time1 : time1 , time2 : time2},
                success: function (success) {
                  if(success){
                    swal("ไปสู่การทดลอง2"," ", "success").then(() => {
                      window.location = '/information-trial2';
                    });
                  }else{
                    swal('มีข้อผิดพลาด',' ','error' ).then(() => {
                      window.location.reload();
                    });
                  }
                }
            });
      });

      $('#wrong2btn').click(function(){
            
        answer1 = "ถูก"
        time1 =(20-time)+"s";
        bool1= 0;
         bool2 = 1;
         $('#wrong1').hide();
         $('#wrong2').show();
         time = 20;
        //  myStartFunction()
         

      }); 

       $('#wrong3btn').click(function(){
            
        answer2 = "ผิด"
        time2 = (20-time)+"s";
        
         $.ajax({
                url: '/answercorrect',
                type:'POST',
                data: {answer1 : answer1, answer2 :answer2, time1 : time1 , time2 : time2},
                success: function (success) {
                  if(success){
                    swal("ไปสู่การทดลอง2"," ", "success").then(() => {
                      window.location = '/information-trial2';
                    });
                  }else{
                    swal('มีข้อผิดพลาด',' ','error' ).then(() => {
                      window.location.reload();
                    });
                  }
                }
            });
      });
      $('#wrong4btn').click(function(){
            
        answer2 = "ผิด"
        time2 = (20-time)+"s";
        

         $.ajax({
                url: '/answercorrect',
                type:'POST',
                data: {answer1 : answer1, answer2 :answer2, time1 : time1 , time2 : time2},
                success: function (success) {
                  if(success){
                    swal("ไปสู่การทดลอง2"," ", "success").then(() => {
                      window.location = '/information-trial2';
                    });
                  }else{
                    swal('มีข้อผิดพลาด',' ','error' ).then(() => {
                      window.location.reload();
                    });
                  }
                }
            });
      });
      $('#wrong5btn').click(function(){
            
        answer2 = "ถูก"
        time2 =(20-time)+"s";
        

         $.ajax({
                url: '/answercorrect',
                type:'POST',
                data: {answer1 : answer1, answer2 :answer2, time1 : time1 , time2 : time2},
                success: function (success) {
                  if(success){
                    swal("ไปสู่การทดลอง2"," ", "success").then(() => {
                      window.location = '/information-trial2';
                    });
                  }else{
                    swal('มีข้อผิดพลาด',' ','error' ).then(() => {
                      window.location.reload();
                    });
                  }
                }
            });
      });
      $('#wrong6btn').click(function(){
            
        answer2 = "ผิด"
        time2 = (20-time)+"s";
        

         $.ajax({
                url: '/answercorrect',
                type:'POST',
                data: {answer1 : answer1, answer2 :answer2, time1 : time1 , time2 : time2},
                success: function (success) {
                  if(success){
                    swal("ไปสู่การทดลอง2"," ", "success").then(() => {
                      window.location = '/information-trial2';
                    });
                  }else{
                    swal('มีข้อผิดพลาด',' ','error' ).then(() => {
                      window.location.reload();
                    });
                  }
                }
            });
      });





    });

</script>
</html>